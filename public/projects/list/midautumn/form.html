<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>中秋</title>
		
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no,email=no,date=no,address=no" />
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!--reset-->
		<link href="css/public.css" rel="stylesheet">
		<script src="//cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
		
		<style>
			/*form*/
			::-webkit-input-placeholder{color:#999;text-align: right;}
			::-moz-placeholder{color:#999;text-align: right;}
			:-moz-placeholder{color:#999;text-align: right;}
			html{
				height: 100%;
			}
			body.withBg{
				height: 100%;
				background: url(img/form-bg.jpg) no-repeat center / cover;
			}
			.page{
				background: url(img/form-bg.jpg) no-repeat center / cover;
			}
    		.form{
    			padding: 27px 27px 0 27px;
    		}
    		.main{
    			padding-bottom: 23px;
    			background: #fff;
    			border-radius: 6px;
    			-webkit-border-radius: 6px;
    		}
    		.t{
    			margin: 0 10px;
    			color: #333;
    			font-size: 14px;
    			padding: 20px 0 9px 5px;
    			border-bottom: solid 1px #d2d2d2;
    		}
    		.block{
    			padding: 17px 25px 0 25px;
    		}
    		.input1{
    			height: 18px;
    			font-size: 12px;
    			color: #666;
    			border-bottom: solid 1px #d2d2d2;
    		}
    		input.big{
    			display: block;
    			width: 100%;
    		}
    		input.small{
    			display: inline-block;
    			width: 55px;
    			text-indent: 4px;
    		}
    		.txt{
    			color: #999;
    			line-height: 18px;
    			font-size: 12px;
    		}
    		.clearfix{
    			margin-bottom: 5px;
    		}
    		.form-t{
    			width: 60px;
    			line-height: 34px;
    			text-align: right;
    			float: left;
    		}
    		.form .form-input{
    			margin: 0 33px 0 60px;
    		}
    		.input2{
    			display: block;
    			width: 100%;
    			border: solid 1px #d2d2d2;
    			height: 34px;
    			border-radius: 4px;
    			-webkit-border-radius: 4px;
    			text-indent: 10px;
    			color: #333;
    			font-size: 14px;
    		}
    		textarea.input2{
    			height: 63px;
    			resize: none;
    			line-height: 18px;
    		}
    		.foot{
    			padding: 80px 27px 27px 27px;
    		}
    		.sub{
    			display: block;
    			width: 100%;
    			height: 45px;
    			line-height: 45px;
    			color: #181201;
    			font-size: 18px;
    			text-align: center;
    			background: #f1b40c;
    		}
    		.sub span{
    			margin: -2px 10px 0 0;
    			vertical-align: middle;
    		}
		</style>
	<body>
		<div class="page" id="page">
			<div class="form">
				<form>
					<div class="main">
						<p class="t">三行家书</p>
						<div class="block">
							<input class="input1 big" id="line1" maxlength='20' type="text" placeholder="20字" />
						</div>
						<div class="block">
							<input class="input1 big" id="line2" maxlength='20' type="text" placeholder="20字" />
						</div>
						<div class="block">
							<input class="input1 big" id="line3" maxlength='20' type="text" placeholder="20字" />
						</div>
						<div class="block" style="text-align: right;font-size: 0;">
							<span class="txt">来自@</span>
							<input class="input1 small" type="text" id="who" />
						</div>
						<p class="t" style="padding-top: 42px;">收件人信息</p>
						<div class="clearfix" style="margin-top: 10px;">
							<div class="form-t">姓名：</div>
							<div class="form-input">
								<input class="input2" type="text" id="name"/>
							</div>
						</div>
						<div class="clearfix">
							<div class="form-t">邮编：</div>
							<div class="form-input">
								<input class="input2" maxlength="6" type="tel" id="postcode"/>
							</div>
						</div>
						<div class="clearfix">
							<div class="form-t">地址：</div>
							<div class="form-input">
								<textarea class="input2" id="addr"></textarea>
							</div>
						</div>
					</div>
				</form>
			</div>
			
			<div class="foot">
				<!--<button id="sub" type="button" class="sub"><span class="icon icon-view"></span>预览</button>-->
				<a href="list.html" class="sub"><span class="icon icon-view"></span>预览</a>
			</div>
		</div>
		
		<script type="text/javascript">
		
		
			// 横屏监听 
			var updateOrientation = function(){     
				if(window.orientation=='-90' || window.orientation=='90'){         
					alert('为了更好的体验，请将手机/平板竖过来！');     
				}
			};
			window.onorientationchange = updateOrientation;
		
			var scaleH = window.innerHeight;
				if(scaleH > 580){
					$('body').addClass('withBg');
					$('#page').css({
						'background':'none',
						'paddingTop':(scaleH-580)/2
					});
					page.style.background = 'none'
			}
				
			$(function(){
				$('#sub').click(function(){
					var vailFields = [{
							'id':'line1',
							'rule':'require'
						},{
							'id':'line2',
							'rule':'require'
						},{
							'id':'line3',
							'rule':'require'
						},{
							'id':'who',
							'rule':'require'
						},{
							'id':'name',
							'rule':'require'
						},{
							'id':'postcode',
							'rule':'postcode'
						},{
							'id':'addr',
							'rule':'require'
						}
					];
					
					//return !/^\s*$/g.test(val);
					//return /^13[0-9]{1}[0-9]{8}$|15[0-9]{1}[0-9]{8}$|18[0-9]{1}[0-9]{8}$|17[0-9]{1}[0-9]{8}$/.test(val);
					
					var hasValied = true;
					for (var i = 0; i<vailFields.length; i++) {
						
						var val = $('#' + vailFields[i].id).val();
						var pattern;
						if(vailFields[i].rule == 'require'){
							pattern = /\S/;
						}else if(vailFields[i].rule == 'postcode'){
							pattern = /^[1-9][0-9]{5}$/;
						}
						if( !pattern.test(val) ){
							$('#' + vailFields[i].id).focus();
							hasValied = false;
							break ;
						}
					}
					
					if(!hasValied){
						return false;
					}else{
						//$("form").submit();
						window.location.href = 'list.html'
					}
				});
			});
		</script>
	</body>
</html>
