
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="renderer" content="webkit">
		<title>添加视频课程片段</title>		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
		<!--[if lte IE 9]>
		    <script src="js/browser-not-supported-ie10.js"></script>
		<![endif]-->
		<link rel="stylesheet" href="css/public.css">
		<link rel="stylesheet" href="css/component-skin.css">
		<link rel="stylesheet" href="js/layui/css/layui.css">	
		<style type="text/css">
			.layui-field-box{position: relative;}
			.layui-field-box .layui-box.layui-upload-button{position: absolute;left: 125px;top: 228px;}
			.upload-mask{position: absolute;top: 0;left: 0;bottom: 0;right: 0;text-align: center;background: #ddd;z-index: 1000;overflow: hidden;}
			.upload-mask i{display: inline-block;width: 20px;height: 20px;line-height: 20px;}
		</style>
	</head>
	<body class="add-course-page">
		
		<div class="main-wrapper">
			
			<div class="main-header">
	<!-- Logo -->
    <a href="#" class="logo">
      <img src="img/logo.png"><b>LQ Admin</b>
    </a>
    <div class="user">
    	<img src="img/logo.png" />
    	<span>super man</span>
    	<ul>
    		<!--<li><a href=""><i class="layui-icon">&#xe614;</i>修改密码</a></li>-->
    		<li><a href="?c=login&m=out"><i class="layui-icon">&#xe609;</i>退出登录</a></li>
    	</ul>
    </div>
   	<!--<a class="msg">
      	<i class="icon-envelope"></i>
     	<span class="msg-num">4</span>
    </a>-->
</div>            <div class="main-sidebar">
    <div class="sidebar">
    	<div id="jquery-accordion-menu" class="jquery-accordion-menu black">
    		<ul id="menu-list">
    			
    			<!-- <li class="act">
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>重要反馈通知</a>
                    <ul class="submenu">
                       	<li><a href="javascript:;">重要反馈通知</a></li>
                    </ul>
                </li> -->
    			<li  class="act" >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>课程体系维护</a>
                    <ul class="submenu">
                       	<li  class="act" ><a href="javascript:;">课程片段维护</a>
                       		<ul class="submenu">
                            <!--  -->
		                       	<li ><a href="?c=lexam&m=list">课程片段列表</a></li>
                            <!--  -->
		                       	<li ><a href="?c=lexam&m=list&flag=2">我的课程片段</a></li>
		                       	<!--<li><a href="?c=lesson&m=save&type=1">添加图文课程片段</a></li>
		                       	<li><a href="?c=lesson&m=save">添加视频课程片段</a></li>-->
		                    </ul>
                       	</li>
                       	<li ><a href="javascript:;">课程片段审核</a>
                       		<ul class="submenu">
                            <!--  -->
		                       	<li><a href="?c=lexam&m=list&flag=3">课程片段审核列表</a></li>
		                    </ul>
                       	</li>
                    </ul>
                </li>
                <li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>资源类别维护</a>
                    <ul class="submenu">
						<!--  -->
                       	<li><a href="?c=dir&m=list">方向维护</a></li>
						<!--  -->
	            		<li><a href="?c=subject&m=demo">科目章节维护</a></li>
                    </ul>
                </li>
                <li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>作者（讲师）信息维护</a>
                    <ul class="submenu">
						<!--  -->
                        <li><a href="?c=author&m=list">作者（讲师）列表</a></li>
						<!--  -->
	            		<!--<li><a href="?c=author&m=save">新增作者（讲师）</a></li>-->
                    </ul>
                </li>
                <li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>题库维护</a>
                    <ul class="submenu">
                       	<li ><a href="javascript:;">试题维护</a>
                       		<ul class="submenu">
		                       	<li><a href="?c=questions&m=list&flag=1&status=2">试题列表</a></li>
		                       	<li><a href="?c=questions&m=list&flag=2&status=2">我的试题</a></li>
		                       	<!--<li><a href="?c=questions&m=save">添加试题</a></li>-->
		                    </ul>
                       	</li>
                       	<li ><a href="javascript:;">试题审核</a>
                       		<ul class="submenu">
		                       	<li><a href="?c=qexam&m=list&status=2">试题审核列表</a></li>
		                       	<!--<li><a href="javascript:;">试题审核</a></li>-->
		                    </ul>
                       	</li>
                        <li ><a href="javascript:;">试卷维护</a>
                          <ul class="submenu">
                            <li><a href="?c=paper&m=list">试卷列表</a></li>
                            <li><a href="?c=paper&m=list&flag=2&status=2">我的试卷</a></li>
                            <li><a href="?c=paper&m=info">创建试卷</a></li>
                            <li><a href="?c=paper&m=templatelist">模板列表</a></li>
                            <!--<li><a href="javascript:;">试题审核</a></li>-->
                        </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div> 
			
		  	<div class="content-wrapper ">
	  			<button class="layui-btn layui-btn-normal" type="button" id="goList" data-href="?c=lexam&m=list&flag=2">返回列表</button>
	  			<fieldset class="layui-elem-field mt10">
  					<legend>添加视频课程片段 </legend>  					<div class="layui-field-box">
  						  							<form class="layui-form" id="addCourseForm" action="?c=lesson&m=save&type=0" method="post" enctype="multipart/form-data">
  							  						<div class="layui-form info-form">			               
				                <div class="layui-form-item">
				                    <label class="layui-form-label">科目-章-节</label>
				                   	<div class="layui-inline">
				                        <select name="subject_id" lay-verify="required" data-msg="请选择科目" id="subject" lay-filter="subject">
				                        	<option value="">请选择</option>
										  										       	<option value="1"  >JavaWeb技术综合运用</option>
									       										       	<option value="3"  >持久层框架</option>
									       										       	<option value="5"  >C语言</option>
									       										       	<option value="16"  >软件测试技术基础课程</option>
									       										       	<option value="67"  >Java面向对象程序设计</option>
									       										       	<option value="102"  >Java点穴——高级专题探究</option>
									       										       	<option value="110"  >Oracle开发与运维技术实践</option>
									       										       	<option value="118"  >Spring框架</option>
									       										       	<option value="187"  >Web前端技术综合应用</option>
									       										       	<option value="448"  >JAVA</option>
									       										       	<option value="500"  >JAVASE项目</option>
									       										       	<option value="509"  >JAVA进阶项目</option>
									       										       	<option value="540"  >web</option>
									       										       	<option value="556"  >mybatis</option>
									       										       	<option value="609"  >CEP课程</option>
									       										       	<option value="610"  >人文365</option>
									       										
										</select>     
				                    </div>
				                    <div class="layui-inline">
				                        <select name="chapter_id" lay-verify="required" data-msg="请选择章" id="chapter" lay-filter="chapter">
				                          	<option value="">请选择</option>
																					</select>     
				                    </div>
				                    <div class="layui-inline">
				                        <select name="section_id" lay-verify="required" data-msg="请选择节" id="section">
				                          	<option value="">请选择</option>
																					</select>
				                    </div>
				                </div>
				                <div class="layui-form-item">
				                	<input type="hidden" name="author_id" value="" id="author_id"/>
				                    <label class="layui-form-label">讲师(作者)</label>
				                    <div class="layui-form-text relative tealist">
				                        <input maxlength="12" class="layui-input" lay-verify="isFillInStore" autocomplete="off" type="text" id="autoCompleteInput"  placeholder="讲师(作者)" name="author" value=""/>
				                    </div>
				                </div>
				              	<div class="layui-form-item">
				                    <label class="layui-form-label">知识产权</label>
				                    <div class="layui-input-block">
				                        <select name="property_right" lay-verify="required" data-msg="请选择知识产权">
				                          <option value="">请选择</option>
										  <option value="0" >自有</option>
										  <option value="1" >引进</option>
										</select>     
				                    </div>
				                </div>
				                <div class="layui-form-item">
				                    <label class="layui-form-label">资源名称</label>
				                    <div class="layui-form-text">
				                        <input maxlength="50" class="layui-input" name="name" autocomplete="off" type="text" lay-verify="required" data-msg="请填写资源名称" maxlength="30" placeholder="资源名称" value=""/>			                       
				                    </div>
				                </div>
				                <div class="layui-form-item">
				                    <label class="layui-form-label">上传视频</label>
				                    <div class="layui-input-inline" id="videoWrap" style="padding-top: 38px;">
				                    	<input type="hidden" id="duration" name="duration" value="" / >
				                    	<input lay-verify="required" data-msg="请点击按钮上传视频文件" type="hidden" id="v_path" name="content" value="" / >
				                    					                    </div>
				                </div>
							  	<div class="layui-form-item">
							    	<label class="layui-form-label">内容简介</label>
								    <div class="layui-input-block">
								      	<textarea maxlength="250" name="content_desc" placeholder="内容简介(250字以内)"  class="layui-textarea" lay-verify="required" data-msg="请填写内容简介" lay-verify="required" data-msg="请填写资源名称" maxlength="250" ></textarea>
								    </div>
							  	</div>
				                <div class="layui-form-item">
							    	<label class="layui-form-label">备注</label>
								    <div class="layui-input-block">
								      	<textarea maxlength="250" name="spare" placeholder="请输入备注信息"  class="layui-textarea"></textarea>
								    </div>
							  	</div>
				                <div class="layui-form-item">
				                    <div class="layui-input-block">
				                        <button class="layui-btn" type="button" lay-submit lay-filter="addCourseForm">提交审核</button>
				                    </div>
				                </div>
				            </div>
			            </form>
			            <!--layui-upload-file会被选软成一个form,点击上传会触发videoForm的上传事件，将其移除form-->
			            <input name="video" class="layui-upload-file" type="file" id="uploadPicker"> 
  					</div>
	  			</fieldset>
		 	</div><!-- content wrapper end-->
		</div><!-- page wrapper end-->
		
		<!--script-->
		<script src="js/jquery-1.9.1.min.js"></script>	
		<script src="js/jquery-accordion-menu.js"></script>
		<script src="js/layui/layui.all.js"></script>
		<script src="js/public.js"></script>	
		<script src="js/yehAutoComplete/yehAutoComplete.js"></script>	
		<script src="js/addCourse.js"></script>
		<script type="text/javascript">
			layui.use(['upload'],function(){
				//上传视频
				layui.upload({
					elem: '#uploadPicker',
					url: '?c=lesson&m=uploadfile&type=1',
					title:'上传视频',
					method: 'post',
					ext:'mp4',
					type: 'video',
					before:function(input){
						var mask = $('<div class="upload-mask"><i class="layui-icon layui-anim layui-anim-rotate layui-anim-loop">&#xe63d;</i></div>');
						$(input).closest(".layui-upload-button").append(mask);
					},
					success: function(res,input) {
						$(input).closest(".layui-upload-button").find(".upload-mask")[0].remove();
						if(res.code == 0){
							layer.msg(res.msg,{icon:5,anim:6,time:600})
							return false;
						}
						$("#v_path").val(res.v_path);
						$("#duration").val(res.duration);
						if($("#videoWrap video").length == 0){
							$("#videoWrap").append(' <video src="'+res.v_url+'" controls="controls"></video>')
						}else{
							$("#videoWrap video").attr("src",res.v_url);
						} 
					}
				});
			});
		</script>
	</body>
</html>