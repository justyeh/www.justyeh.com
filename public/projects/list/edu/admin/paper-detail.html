
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="renderer" content="webkit">
		<title>正式发布试卷详情</title>
		<link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico" />
		<!--[if lte IE 9]>
		    <script src="js/browser-not-supported-ie10.js"></script>
		<![endif]-->
		<link rel="stylesheet" href="css/public.css">
		<link rel="stylesheet" href="css/component-skin.css">
		<link rel="stylesheet" href="js/layui/css/layui.css">
		<style>	
			.selecter .layui-form .layui-form-item.xl{width:auto;margin-right:20px;}	
			span.layui-input{border:0;}	
			.showPaperStructure h2{font-size:16px;}		
			.showPaperStructure h2 span{padding:0 8px;}
			.showPaperStructure h2 span:first-child{padding-left:0;}
			.showPaperStructure .boxTopic{padding:20px;}
			.showPaperStructure .boxTopic li{margin-bottom:10px;}
			.showPaperStructure .boxTopic li span ,.showPaperStructure .boxTopic li label{padding:0 5px;}
			.showPaperStructure .totalNum{padding:20px;}			
		</style>
	</head>
	<body>
		
		<div class="main-wrapper">
			<div class="main-header">
	<!-- Logo -->
    <a href="#" class="logo">
      <img src="img/logo.png"><b>LQ Admin</b>
    </a>
    <div class="user">
    	<img src="img/logo.png" />
    	<span>super man</span>
    	<ul>
    		<!--<li><a href=""><i class="layui-icon">&#xe614;</i>修改密码</a></li>-->
    		<li><a href="?c=login&m=out"><i class="layui-icon">&#xe609;</i>退出登录</a></li>
    	</ul>
    </div>
   	<!--<a class="msg">
      	<i class="icon-envelope"></i>
     	<span class="msg-num">4</span>
    </a>-->
</div>			<div class="main-sidebar">
    <div class="sidebar">
    	<div id="jquery-accordion-menu" class="jquery-accordion-menu black">
    		<ul id="menu-list">
    			
    			<!-- <li class="act">
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>重要反馈通知</a>
                    <ul class="submenu">
                       	<li><a href="javascript:;">重要反馈通知</a></li>
                    </ul>
                </li> -->
    			<li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>课程体系维护</a>
                    <ul class="submenu">
                       	<li ><a href="javascript:;">课程片段维护</a>
                       		<ul class="submenu">
                            <!--  -->
		                       	<li ><a href="?c=lexam&m=list">课程片段列表</a></li>
                            <!--  -->
		                       	<li ><a href="?c=lexam&m=list&flag=2">我的课程片段</a></li>
		                       	<!--<li><a href="?c=lesson&m=save&type=1">添加图文课程片段</a></li>
		                       	<li><a href="?c=lesson&m=save">添加视频课程片段</a></li>-->
		                    </ul>
                       	</li>
                       	<li ><a href="javascript:;">课程片段审核</a>
                       		<ul class="submenu">
                            <!--  -->
		                       	<li><a href="?c=lexam&m=list&flag=3">课程片段审核列表</a></li>
		                    </ul>
                       	</li>
                    </ul>
                </li>
                <li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>资源类别维护</a>
                    <ul class="submenu">
						<!--  -->
                       	<li><a href="?c=dir&m=list">方向维护</a></li>
						<!--  -->
	            		<li><a href="?c=subject&m=demo">科目章节维护</a></li>
                    </ul>
                </li>
                <li >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>作者（讲师）信息维护</a>
                    <ul class="submenu">
						<!--  -->
                        <li><a href="?c=author&m=list">作者（讲师）列表</a></li>
						<!--  -->
	            		<!--<li><a href="?c=author&m=save">新增作者（讲师）</a></li>-->
                    </ul>
                </li>
                <li  class="act" >
                    <a href="javascript:;"><i class="layui-icon">&#xe632;</i>题库维护</a>
                    <ul class="submenu">
                       	<li ><a href="javascript:;">试题维护</a>
                       		<ul class="submenu">
		                       	<li><a href="?c=questions&m=list&flag=1&status=2">试题列表</a></li>
		                       	<li><a href="?c=questions&m=list&flag=2&status=2">我的试题</a></li>
		                       	<!--<li><a href="?c=questions&m=save">添加试题</a></li>-->
		                    </ul>
                       	</li>
                       	<li ><a href="javascript:;">试题审核</a>
                       		<ul class="submenu">
		                       	<li><a href="?c=qexam&m=list&status=2">试题审核列表</a></li>
		                       	<!--<li><a href="javascript:;">试题审核</a></li>-->
		                    </ul>
                       	</li>
                        <li  class="act" ><a href="javascript:;">试卷维护</a>
                          <ul class="submenu">
                            <li><a href="?c=paper&m=list">试卷列表</a></li>
                            <li><a href="?c=paper&m=list&flag=2&status=2">我的试卷</a></li>
                            <li><a href="?c=paper&m=info">创建试卷</a></li>
                            <li><a href="?c=paper&m=templatelist">模板列表</a></li>
                            <!--<li><a href="javascript:;">试题审核</a></li>-->
                        </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>			
		  	<div class="content-wrapper ">
	  			
	  			<fieldset class="layui-elem-field">
  					<legend>正式发布试卷详情</legend>
  					<div class="layui-field-box">
  						<div class="layui-tab layui-tab-card link-tab">						  
						  	<div class="layui-tab-content">
								<div class="selecter" id="selecter">
									<div class="layui-form">
										<div class="layui-form-item">
										    <label class="layui-form-label">试卷ID</label>
										    <div class="layui-input-block">
										      <span class="layui-input">EP1040</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">试卷类别</label>
										    <div class="layui-input-block">
										      <span class="layui-input">方向考</span>
										    </div>
										</div>
										<div class="layui-form-item xl">										  
										    <label class="layui-form-label">方向-科目-章</label>
										    <div class="layui-input-block">
										      <span class="layui-input">JavaEE工程师--</span>
										    </div>
										</div>	
										<div class="layui-form-item">										  
										    <label class="layui-form-label">试卷难度</label>
										    <div class="layui-input-block">
										      <span class="layui-input">简单</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">试卷总分</label>
										    <div class="layui-input-block">
										      <span class="layui-input">68分</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">试卷时长</label>
										    <div class="layui-input-block">
										      <span class="layui-input">120分钟</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">试卷状态</label>
										    <div class="layui-input-block">
										      <span class="layui-input">正式发布</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">提交人</label>
										    <div class="layui-input-block">
										      <span class="layui-input">刘娜娜</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">首次入库</label>
										    <div class="layui-input-block">
										      <span class="layui-input">2017-09-01 14:16</span>
										    </div>
										</div>
										<div class="layui-form-item">										  
										    <label class="layui-form-label">最新操作</label>
										    <div class="layui-input-block">
										      <span class="layui-input">2017-09-05 09:40</span>
										    </div>
										</div>
									</div>
									<form class="layui-form" action="c=paper&m=detail&id=1040&type=" method="get">
										<input type="hidden" name="c" value="paper">
										<input type="hidden" name="m" value="detail">
										<input type="hidden" id="paperId" value="1040"/>
										<input type="hidden" id="selectId"/>
										<div class="layui-form-item">
										    <label class="layui-form-label">入卷试题</label>
										    <div class="layui-input-block">
										      	<select name="type" lay-filter="test">
													<option value="NULL">全部类型</option>
																										<option value="1" >单选</option>
											        													<option value="2" >多选</option>
											        													<option value="3" >简答</option>
											        													<option value="4" >程序设计</option>
											        													<option value="5" >任务</option>
											        										      	</select>
										    </div>
										</div>										
										<button class="layui-btn ml20" onclick="showPaper()" type="button">试卷结构及选择范围</button>
									</form>
						  		</div> 
					  		</div> 
					  	</div> 
				  		
						
						<!--表格-->
						<table class="layui-table">
						  	<thead>
							    <tr>
							      	<th></th>
							      	<th>操作</th>
							      	<th>题型</th>
							      	<th width="30%">题目</th>
							      	<th width="22%">科目-章-节</th>
							      	<th>难度</th>
							      	<th>资源ID</th>
							    </tr> 
						  	</thead>
							<tbody>
															<tr>
								    <td>1</td>
								    <td><a class="c-link" href="javascript:showDetail(100002)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">下面描述中说法正确的是（）</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100002</td>
								</tr>
															<tr>
								    <td>2</td>
								    <td><a class="c-link" href="javascript:showDetail(100017)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">想要编译和运行java程序，我们至少需要______</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100017</td>
								</tr>
															<tr>
								    <td>3</td>
								    <td><a class="c-link" href="javascript:showDetail(100112)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">Java源代码文件的扩展名是什么？</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100112</td>
								</tr>
															<tr>
								    <td>4</td>
								    <td><a class="c-link" href="javascript:showDetail(100124)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">&ensp;下列说法正确的是</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100124</td>
								</tr>
															<tr>
								    <td>5</td>
								    <td><a class="c-link" href="javascript:showDetail(100152)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">一个以”.java”为后缀的源文件</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100152</td>
								</tr>
															<tr>
								    <td>6</td>
								    <td><a class="c-link" href="javascript:showDetail(100157)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">编译Java源程序文件将产生相应的字节码文件，这些字节码文件的扩展名为</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</div></div></td>
								    <td>简单</td>
								    <td>TE100157</td>
								</tr>
															<tr>
								    <td>7</td>
								    <td><a class="c-link" href="javascript:showDetail(100222)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">下列代码的输出结果是()
(见题目源码1)
</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-3程序设计基础-3.3基本运算符</div></div></td>
								    <td>简单</td>
								    <td>TE100222</td>
								</tr>
															<tr>
								    <td>8</td>
								    <td><a class="c-link" href="javascript:showDetail(100233)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">代码System.&ensp;out.&ensp;println(10&ensp;%&ensp;3&ensp;*&ensp;2)；将打印出？</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-3程序设计基础-3.3基本运算符</div></div></td>
								    <td>简单</td>
								    <td>TE100233</td>
								</tr>
															<tr>
								    <td>9</td>
								    <td><a class="c-link" href="javascript:showDetail(100315)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">(见题目源码1)代码运行结果为：&ensp;&ensp;&ensp;</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-3程序设计基础-3.3基本运算符</div></div></td>
								    <td>简单</td>
								    <td>TE100315</td>
								</tr>
															<tr>
								    <td>10</td>
								    <td><a class="c-link" href="javascript:showDetail(100364)" >查看</a></td>
								    <td>单选</td>
								    <td><div class="txt-ellipsis"><div class="content">分析下面代码，正确的选项是（）
(见题目源码1)
</div></div></td>
								    <td><div class="txt-ellipsis"><div class="content">Java面向对象程序设计-3程序设计基础-3.3基本运算符</div></div></td>
								    <td>简单</td>
								    <td>TE100364</td>
								</tr>
							
							</tbody>
						</table>

													<div class="pager fr">
																											<span class="current prev">«</span>
																																				<span class="current">1</span>
																																				<a href="?c=paper&m=detail&id=1040&p=1">2</a>
																																				<a href="?c=paper&m=detail&id=1040&p=2">3</a>
																																				<a href="?c=paper&m=detail&id=1040&p=1">»</a>
																								</div>
												<input type="hidden" value="" id="limit"/>
						<div class="layui-form">
							<div class="layui-form-item pt20">
			                    <div class="layui-input-block" style="margin-left:0;">
			                        <a href="?c=paper&m=list" class="layui-btn layui-btn-normal">返回列表</a>
			                        <button class="layui-btn" type="button" onclick="confirmDialog(1040)">发布试题模版</button>
			                        <a href="#" class="layui-btn">发布考试</a>
			                    </div>
			                </div>
						</div>
  					</div>
	  			</fieldset>
		 	</div><!-- content wrapper end-->
		</div><!-- page wrapper end-->
	
		<div class="layui-field-box showPaperStructure">
			<div class="layui-form" >
									<h2>一、<span class="bold">单选题</span>试题数量 <span>11</span></h2>
					<div class="boxTopic">
						<ul>
															<li><span>范围1</span><span>Java面向对象程序设计-3程序设计基础-3.3基本运算符</span><span>难度 简单</span>单题分值<span>5</span>数量 <span>4</span>（入卷数量 <label>3</label>）</li>
															<li><span>范围2</span><span>Java面向对象程序设计-2环境搭建及第一个java程序-2.2第一个Java程序及其解释</span><span>难度 简单</span>单题分值<span>5</span>数量 <span>7</span>（入卷数量 <label>7</label>）</li>
													</ul>
					</div>
													<h2>二、<span class="bold">多选题</span>试题数量 <span>4</span></h2>
					<div class="boxTopic">
						<ul>
															<li><span>范围1</span><span>Java面向对象程序设计-3程序设计基础-</span><span>难度 简单</span>单题分值<span>2</span>数量 <span>4</span>（入卷数量 <label>4</label>）</li>
													</ul>
					</div>
													<h2>三、<span class="bold">简答题</span>试题数量 <span>1</span></h2>
					<div class="boxTopic">
						<ul>
															<li><span>范围1</span><span>Java面向对象程序设计--</span><span>难度 简单</span>单题分值<span>2</span>数量 <span>1</span>（入卷数量 <label>1</label>）</li>
													</ul>
					</div>
													<h2>四、<span class="bold">程序设计</span>试题数量 <span>5</span></h2>
					<div class="boxTopic">
						<ul>
															<li><span>范围1</span><span>Java面向对象程序设计-3程序设计基础-</span><span>难度 简单</span>单题分值<span>2</span>数量 <span>5</span>（入卷数量 <label>4</label>）</li>
													</ul>
					</div>
								<!--<p class="bold ml20">可生成不同考卷数量：<span>1098</span></p>-->
				<div class="clearfix totalNum">
					<p class="fl">试卷总题量：<label>21</label></p>
					<p class="fl ml20">试卷难度：<label>简单</label></p>
				</div>
			</div>
		</div><!-- 试卷结构及选题范围 -->
		
		<div class="layui-field-box confirmDialog">
			<form class="layui-form" action="" id="mobanForm">					
			    <input placeholder="请输入试卷模版名称..." class="layui-input" lay-verify="title" name="" maxlength="30"/>
			</form>
		</div><!-- 确认发布试卷模版弹框 -->
		
		
		
		<!--script-->
		<script src="js/jquery-1.9.1.min.js"></script>
		<script src="js/jquery-accordion-menu.js"></script>
		<script src="js/layui/layui.js"></script>
		<script src="js/public.js"></script>
		<script src="js/listPage.js"></script>
		<script src="js/jquery.pagination.js"></script>
		<script>
			layui.use(['form'], function(){
  				var form = layui.form();
				form.on('select(test)', function(data){				
				  //console.log(data.value); //得到被选中的值			
				  $("#selectId").val(data.value);
				  showPage();
				});      
			})
			
			function showPaper(){
				layer.open({
				  type: 1,	
				  title:'试卷结构及选题范围',
				  content: $(".showPaperStructure"),
				  area: ["780px", "580px"],				  
				  btn: ['发布试卷模版','关闭'] ,//按钮
				  yes: function(index,layero){
				  	   layer.close(index);
			           confirmDialog();
			        },
			        cancel: function(){ 
			    		layer.close();
			  		}  
				});
				
			}
			
			function confirmDialog(){
				var pid = $("#paperId").val();
				layer.open({
					type: 1,
					title:'发布试卷模板',
					area: ["420px", "180px"],
//					shade: 0,
					btn: ['提交','取消'] ,//按钮
					content: $(".confirmDialog"),
					yes: function(index,layero){
						var title = $("#mobanForm input").val();
						if(title.length<1){
							layer.msg('请填写模版名称',{icon:5,anim :6});
							return false;
						}else{							
							$.ajax({
								type:"GET",
								url:"?c=paper&m=template&id=" + pid + '&name=' + title,
								dataType:'json',
								success:function(data){							
									if(data.code = '200'){
										layer.msg('发布成功');
										setTimeout('layer.closeAll()',2000);
									}else{
										layer.msg(data.msg);
									}							
								}
							});							
						}
			        },
			        cancel: function(){ 
			    		layer.close();
			  		}  
				})
				
				
			}
			//试题详情展示
			function showDetail(id){
				var index = layer.open({
					type: 2,
					title:'试题详情展示',
					area: ["780px", "580px"],
					maxmin: true,									
					btn: ['关闭'] ,//按钮
//					content: $(".showDetail"),
					content: '?c=paper&m=qdetail&id='+id,
					cancel: function(){ 
			    		layer.close();
			  		}  
				})
				layer.full(index);
			}
			
			//ajax 分页
			function showPage(a) {	
				if(a) {p = a;} else {p = 0;}
				var type = $("#selectId").val();
				var pid = $("#paperId").val();
				var url = '?c=paper&m=search&id=' + pid + '&type=' + type + '&p=' + p;
				var html = '';
				$.get(url, function(data) {
					if(data.code == '200') {
						for(var i = 0; i < data.data.length; i++) {
							html += '<tr><td>' + data.data[i].number + '</td><td><a class="c-link" href="javascript:showDetail(' + data.data[i].id + 
							')" >查看</a></td><td>' + data.data[i].type_id + '</td><td><div class="txt-ellipsis"><div class="content">' + data.data[i].subject + 
							'</div></div></td><td><div class="txt-ellipsis"><div class="content">' + data.data[i].subject_id + '-' + data.data[i].chapter_id + '-' + data.data[i].section_id + 
							'</div></div></td><td>' + data.data[i].difficulty + '</td><td>' + data.data[i].question_id + '</td></tr>';							
						}						
						$(".layui-table tbody").html(html);
						$("#limit").val(data.limit);
						drawPage(data.total, data.page);												
					} else {
						$(".layui-table tbody").html('<tr><td colspan="7">暂无数据</td></tr>');
						$(".pager").html("");
					}
					
				}, 'json');
			}
			
			function drawPage(a, b) {
				$(".pager").pagination(a, {
					prev_text: "«",
					next_text: "»",
					items_per_page: $("#limit").val(),
					num_edge_entries: 2,
					num_display_entries: 4,
					current_page: b,
					callback: PageCallback
				})
			}
			function PageCallback(a, b) {
				showPage(a);
				return !1
			}
		</script>
	</body>
</html>
